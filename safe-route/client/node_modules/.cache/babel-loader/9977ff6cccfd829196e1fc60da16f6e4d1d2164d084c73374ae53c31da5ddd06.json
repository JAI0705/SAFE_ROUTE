{"ast":null,"code":"/**\n * Geocoding service for the Safe Route application\n * Uses OpenStreetMap Nominatim API for geocoding\n */\n\n// Base URL for Nominatim API\nconst NOMINATIM_BASE_URL = 'https://nominatim.openstreetmap.org';\n\n// Search for locations in India by query\nexport const searchLocations = async query => {\n  try {\n    // Add viewbox parameter to limit search to India's boundaries\n    // India's approximate boundaries: 6.0,68.0,37.0,97.5\n    const response = await fetch(`${NOMINATIM_BASE_URL}/search?q=${encodeURIComponent(query)}&countrycodes=in&format=json&limit=10&viewbox=68.0,37.0,97.5,6.0&bounded=1`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch locations');\n    }\n    const data = await response.json();\n\n    // Transform the response to match our application's format\n    return data.map(item => ({\n      name: item.display_name,\n      shortName: item.name,\n      lat: parseFloat(item.lat),\n      lng: parseFloat(item.lon),\n      type: item.type,\n      importance: item.importance,\n      osmId: item.osm_id\n    }));\n  } catch (error) {\n    console.error('Error searching locations:', error);\n    return [];\n  }\n};\n\n// Get location details by coordinates (reverse geocoding)\nexport const getLocationByCoordinates = async (lat, lng) => {\n  try {\n    const response = await fetch(`${NOMINATIM_BASE_URL}/reverse?lat=${lat}&lon=${lng}&format=json`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch location details');\n    }\n    const data = await response.json();\n    return {\n      name: data.display_name,\n      shortName: data.name,\n      lat: parseFloat(data.lat),\n      lng: parseFloat(data.lon),\n      type: data.type,\n      osmId: data.osm_id\n    };\n  } catch (error) {\n    console.error('Error getting location by coordinates:', error);\n    return null;\n  }\n};\n\n// Get detailed information about a place by its OSM ID\nexport const getPlaceDetails = async (osmId, osmType) => {\n  try {\n    const response = await fetch(`${NOMINATIM_BASE_URL}/details?osmtype=${osmType}&osmid=${osmId}&format=json`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch place details');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error getting place details:', error);\n    return null;\n  }\n};","map":{"version":3,"names":["NOMINATIM_BASE_URL","searchLocations","query","response","fetch","encodeURIComponent","ok","Error","data","json","map","item","name","display_name","shortName","lat","parseFloat","lng","lon","type","importance","osmId","osm_id","error","console","getLocationByCoordinates","getPlaceDetails","osmType"],"sources":["/home/jai/Desktop/SAFE_ROUTE_2/safe-route/client/src/services/geocodingService.js"],"sourcesContent":["/**\n * Geocoding service for the Safe Route application\n * Uses OpenStreetMap Nominatim API for geocoding\n */\n\n// Base URL for Nominatim API\nconst NOMINATIM_BASE_URL = 'https://nominatim.openstreetmap.org';\n\n// Search for locations in India by query\nexport const searchLocations = async (query) => {\n  try {\n    // Add viewbox parameter to limit search to India's boundaries\n    // India's approximate boundaries: 6.0,68.0,37.0,97.5\n    const response = await fetch(\n      `${NOMINATIM_BASE_URL}/search?q=${encodeURIComponent(query)}&countrycodes=in&format=json&limit=10&viewbox=68.0,37.0,97.5,6.0&bounded=1`\n    );\n    \n    if (!response.ok) {\n      throw new Error('Failed to fetch locations');\n    }\n    \n    const data = await response.json();\n    \n    // Transform the response to match our application's format\n    return data.map(item => ({\n      name: item.display_name,\n      shortName: item.name,\n      lat: parseFloat(item.lat),\n      lng: parseFloat(item.lon),\n      type: item.type,\n      importance: item.importance,\n      osmId: item.osm_id\n    }));\n  } catch (error) {\n    console.error('Error searching locations:', error);\n    return [];\n  }\n};\n\n// Get location details by coordinates (reverse geocoding)\nexport const getLocationByCoordinates = async (lat, lng) => {\n  try {\n    const response = await fetch(\n      `${NOMINATIM_BASE_URL}/reverse?lat=${lat}&lon=${lng}&format=json`\n    );\n    \n    if (!response.ok) {\n      throw new Error('Failed to fetch location details');\n    }\n    \n    const data = await response.json();\n    \n    return {\n      name: data.display_name,\n      shortName: data.name,\n      lat: parseFloat(data.lat),\n      lng: parseFloat(data.lon),\n      type: data.type,\n      osmId: data.osm_id\n    };\n  } catch (error) {\n    console.error('Error getting location by coordinates:', error);\n    return null;\n  }\n};\n\n// Get detailed information about a place by its OSM ID\nexport const getPlaceDetails = async (osmId, osmType) => {\n  try {\n    const response = await fetch(\n      `${NOMINATIM_BASE_URL}/details?osmtype=${osmType}&osmid=${osmId}&format=json`\n    );\n    \n    if (!response.ok) {\n      throw new Error('Failed to fetch place details');\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Error getting place details:', error);\n    return null;\n  }\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA,MAAMA,kBAAkB,GAAG,qCAAqC;;AAEhE;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOC,KAAK,IAAK;EAC9C,IAAI;IACF;IACA;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,GAAGJ,kBAAkB,aAAaK,kBAAkB,CAACH,KAAK,CAAC,4EAC7D,CAAC;IAED,IAAI,CAACC,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;IAC9C;IAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;;IAElC;IACA,OAAOD,IAAI,CAACE,GAAG,CAACC,IAAI,KAAK;MACvBC,IAAI,EAAED,IAAI,CAACE,YAAY;MACvBC,SAAS,EAAEH,IAAI,CAACC,IAAI;MACpBG,GAAG,EAAEC,UAAU,CAACL,IAAI,CAACI,GAAG,CAAC;MACzBE,GAAG,EAAED,UAAU,CAACL,IAAI,CAACO,GAAG,CAAC;MACzBC,IAAI,EAAER,IAAI,CAACQ,IAAI;MACfC,UAAU,EAAET,IAAI,CAACS,UAAU;MAC3BC,KAAK,EAAEV,IAAI,CAACW;IACd,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAME,wBAAwB,GAAG,MAAAA,CAAOV,GAAG,EAAEE,GAAG,KAAK;EAC1D,IAAI;IACF,MAAMd,QAAQ,GAAG,MAAMC,KAAK,CAC1B,GAAGJ,kBAAkB,gBAAgBe,GAAG,QAAQE,GAAG,cACrD,CAAC;IAED,IAAI,CAACd,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;IACrD;IAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IAElC,OAAO;MACLG,IAAI,EAAEJ,IAAI,CAACK,YAAY;MACvBC,SAAS,EAAEN,IAAI,CAACI,IAAI;MACpBG,GAAG,EAAEC,UAAU,CAACR,IAAI,CAACO,GAAG,CAAC;MACzBE,GAAG,EAAED,UAAU,CAACR,IAAI,CAACU,GAAG,CAAC;MACzBC,IAAI,EAAEX,IAAI,CAACW,IAAI;MACfE,KAAK,EAAEb,IAAI,CAACc;IACd,CAAC;EACH,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;IAC9D,OAAO,IAAI;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMG,eAAe,GAAG,MAAAA,CAAOL,KAAK,EAAEM,OAAO,KAAK;EACvD,IAAI;IACF,MAAMxB,QAAQ,GAAG,MAAMC,KAAK,CAC1B,GAAGJ,kBAAkB,oBAAoB2B,OAAO,UAAUN,KAAK,cACjE,CAAC;IAED,IAAI,CAAClB,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;IAClD;IAEA,OAAO,MAAMJ,QAAQ,CAACM,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOc,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACpD,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}