{"ast":null,"code":"var _jsxFileName = \"/home/jai/Desktop/SAFE_ROUTE_2/safe-route/client/src/components/MapView.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap, Polyline, useMapEvents, CircleMarker } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for Leaflet marker icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Custom marker icons\nconst createCustomIcon = type => {\n  return L.divIcon({\n    className: `custom-marker-icon ${type}`,\n    html: type === 'user' ? '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>' : type === 'start' ? '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>' : '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>',\n    iconSize: [30, 30],\n    iconAnchor: [15, 30]\n  });\n};\n\n// Component to handle map events\nconst MapEvents = ({\n  onBoundsChange\n}) => {\n  _s();\n  const map = useMapEvents({\n    moveend: () => {\n      const bounds = map.getBounds();\n      const boundsData = {\n        north: bounds.getNorth(),\n        south: bounds.getSouth(),\n        east: bounds.getEast(),\n        west: bounds.getWest()\n      };\n\n      // Store bounds in a hidden element for access from outside the component\n      const mapBoundsEl = document.getElementById('mapBounds');\n      if (mapBoundsEl) {\n        mapBoundsEl.dataset.north = boundsData.north;\n        mapBoundsEl.dataset.south = boundsData.south;\n        mapBoundsEl.dataset.east = boundsData.east;\n        mapBoundsEl.dataset.west = boundsData.west;\n      }\n      onBoundsChange(boundsData);\n    },\n    zoomend: () => {\n      const bounds = map.getBounds();\n      const boundsData = {\n        north: bounds.getNorth(),\n        south: bounds.getSouth(),\n        east: bounds.getEast(),\n        west: bounds.getWest()\n      };\n\n      // Store bounds in a hidden element for access from outside the component\n      const mapBoundsEl = document.getElementById('mapBounds');\n      if (mapBoundsEl) {\n        mapBoundsEl.dataset.north = boundsData.north;\n        mapBoundsEl.dataset.south = boundsData.south;\n        mapBoundsEl.dataset.east = boundsData.east;\n        mapBoundsEl.dataset.west = boundsData.west;\n      }\n      onBoundsChange(boundsData);\n    }\n  });\n  return null;\n};\n\n// Component to center map on user location\n_s(MapEvents, \"D2AvXN8Rt/r3DPix6IJfcPGmgF0=\", false, function () {\n  return [useMapEvents];\n});\n_c = MapEvents;\nconst CenterMap = ({\n  position\n}) => {\n  _s2();\n  const map = useMap();\n  useEffect(() => {\n    if (position) {\n      map.flyTo([position.lat, position.lng], 13, {\n        animate: true,\n        duration: 1.5\n      });\n    }\n  }, [map, position]);\n  return null;\n};\n_s2(CenterMap, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c2 = CenterMap;\nconst MapView = ({\n  userLocation,\n  startLocation,\n  destination,\n  route,\n  roadRatings,\n  routeSegments,\n  trafficData,\n  onBoundsChange,\n  onRoadRating\n}) => {\n  _s3();\n  const [mapCenter, setMapCenter] = useState([20.5937, 78.9629]); // Default center of India\n  const [mapZoom, setMapZoom] = useState(5);\n  const [selectedRoad, setSelectedRoad] = useState(null);\n\n  // Update map center when user location is available\n  useEffect(() => {\n    if (userLocation) {\n      setMapCenter([userLocation.lat, userLocation.lng]);\n      setMapZoom(13);\n    }\n  }, [userLocation]);\n\n  // Update map center when start location is selected\n  useEffect(() => {\n    if (startLocation) {\n      setMapCenter([startLocation.lat, startLocation.lng]);\n      setMapZoom(13);\n    }\n  }, [startLocation]);\n\n  // Handle road click for rating\n  const handleRoadClick = (event, roadSegment) => {\n    // Prevent map click event\n    if (event && event.originalEvent) {\n      L.DomEvent.stopPropagation(event.originalEvent);\n    }\n    setSelectedRoad(roadSegment);\n\n    // Log for debugging\n    console.log('Road segment selected for rating:', roadSegment);\n  };\n\n  // Handle click on the main route - optimized version\n  const handleRouteClick = event => {\n    // Prevent default behaviors and propagation\n    if (event && event.originalEvent) {\n      L.DomEvent.stopPropagation(event.originalEvent);\n    }\n\n    // Get the click location\n    const clickLatLng = event.latlng;\n\n    // Create a simplified road segment from the click location\n    // We'll use a minimal object with just what we need\n    const roadSegment = {\n      id: `route_click_${Date.now()}`,\n      coordinates: {\n        start: {\n          lat: clickLatLng.lat - 0.0005,\n          lng: clickLatLng.lng - 0.0005\n        },\n        end: {\n          lat: clickLatLng.lat + 0.0005,\n          lng: clickLatLng.lng + 0.0005\n        }\n      },\n      clickPoint: clickLatLng\n    };\n\n    // Set the selected road immediately\n    setSelectedRoad(roadSegment);\n  };\n\n  // Submit road rating - fixed version to prevent stuck popups\n  const submitRoadRating = rating => {\n    if (selectedRoad) {\n      // First close the popup to prevent it from getting stuck\n      setSelectedRoad(null);\n\n      // Then submit the rating (after popup is closed)\n      setTimeout(() => {\n        try {\n          onRoadRating(selectedRoad.id, selectedRoad.coordinates, rating);\n        } catch (error) {\n          console.error('Error submitting road rating:', error);\n        }\n      }, 10);\n    }\n  };\n\n  // No longer needed after removing traffic system\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"mapBounds\",\n      style: {\n        display: 'none'\n      },\n      \"data-north\": \"90\",\n      \"data-south\": \"-90\",\n      \"data-east\": \"180\",\n      \"data-west\": \"-180\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: mapCenter,\n      zoom: mapZoom,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapEvents, {\n        onBoundsChange: onBoundsChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), userLocation && /*#__PURE__*/_jsxDEV(CenterMap, {\n        position: userLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 26\n      }, this), userLocation && !startLocation && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [userLocation.lat, userLocation.lng],\n        icon: createCustomIcon('user'),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Your Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this), startLocation && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [startLocation.lat, startLocation.lng],\n        icon: createCustomIcon('start'),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Start Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), destination && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [destination.lat, destination.lng],\n        icon: createCustomIcon('destination'),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this), route && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Polyline, {\n          positions: route.map(point => [point.lat, point.lng]),\n          color: \"#ffffff\",\n          weight: 9,\n          opacity: 0.4,\n          smoothFactor: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Polyline, {\n          positions: route.map(point => [point.lat, point.lng]),\n          pathOptions: {\n            color: '#006400',\n            weight: 6,\n            opacity: 0.8,\n            smoothFactor: 1,\n            className: 'clickable-main-route'\n          },\n          eventHandlers: {\n            click: handleRouteClick,\n            mouseover: e => {\n              // Simplified style change\n              e.target.setStyle({\n                weight: 8,\n                color: '#008000'\n              });\n            },\n            mouseout: e => {\n              // Simplified style change\n              e.target.setStyle({\n                weight: 6,\n                color: '#006400'\n              });\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), roadRatings && roadRatings.map((rating, index) => /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: [[rating.coordinates.start.lat, rating.coordinates.start.lng], [rating.coordinates.end.lat, rating.coordinates.end.lng]],\n        color: rating.rating === 'Good' ? '#28a745' : '#dc3545',\n        weight: 4,\n        opacity: 0.6,\n        dashArray: rating.rating === 'Good' ? '' : '5, 10'\n      }, `rating-${rating.roadId}-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }, this)), routeSegments && routeSegments.length > 0 && routeSegments.map((segment, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Polyline, {\n          positions: segment.points || [[segment.coordinates.start.lat, segment.coordinates.start.lng], [segment.coordinates.end.lat, segment.coordinates.end.lng]],\n          pathOptions: {\n            color: '#006400',\n            weight: 8,\n            opacity: 0.7,\n            className: 'clickable-route-segment'\n          },\n          eventHandlers: {\n            click: e => {\n              console.log('2km road segment clicked:', segment);\n              handleRoadClick(e, segment);\n            },\n            mouseover: e => {\n              e.target.setStyle({\n                weight: 10,\n                color: '#008000'\n              });\n            },\n            mouseout: e => {\n              e.target.setStyle({\n                weight: 8,\n                color: '#006400'\n              });\n            }\n          }\n        }, `segment-${segment.id}-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), index > 0 && /*#__PURE__*/_jsxDEV(CircleMarker, {\n          center: [segment.coordinates.start.lat, segment.coordinates.start.lng],\n          radius: 4,\n          pathOptions: {\n            color: '#ffffff',\n            fillColor: '#006400',\n            fillOpacity: 1,\n            weight: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 15\n        }, this)]\n      }, `segment-container-${segment.id}-${index}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this)), selectedRoad && /*#__PURE__*/_jsxDEV(Popup, {\n        position: [selectedRoad.clickPoint ? selectedRoad.clickPoint.lat : (selectedRoad.coordinates.start.lat + selectedRoad.coordinates.end.lat) / 2, selectedRoad.clickPoint ? selectedRoad.clickPoint.lng : (selectedRoad.coordinates.start.lng + selectedRoad.coordinates.end.lng) / 2],\n        onClose: () => setSelectedRoad(null),\n        closeButton: true,\n        autoClose: true,\n        closeOnClick: false,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"road-rating-popup\",\n          style: {\n            padding: '10px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontWeight: 'bold',\n              marginBottom: '5px'\n            },\n            children: \"Rate this road segment:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), selectedRoad.distanceKm && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              marginBottom: '10px',\n              color: '#555'\n            },\n            children: [\"~\", selectedRoad.distanceKm, \" km segment\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              gap: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                backgroundColor: '#28a745',\n                color: 'white',\n                border: 'none',\n                padding: '8px 16px',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              },\n              onClick: () => submitRoadRating('Good'),\n              children: \"Good Road\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                backgroundColor: '#dc3545',\n                color: 'white',\n                border: 'none',\n                padding: '8px 16px',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              },\n              onClick: () => submitRoadRating('Bad'),\n              children: \"Bad Road\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '10px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                backgroundColor: '#6c757d',\n                color: 'white',\n                border: 'none',\n                padding: '5px 10px',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontSize: '12px'\n              },\n              onClick: () => setSelectedRoad(null),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n};\n_s3(MapView, \"W1ZOpXJoKmLIxJRlk0GVC92+BZI=\");\n_c3 = MapView;\nexport default MapView;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"MapEvents\");\n$RefreshReg$(_c2, \"CenterMap\");\n$RefreshReg$(_c3, \"MapView\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","useMap","Polyline","useMapEvents","CircleMarker","L","icon","iconShadow","jsxDEV","_jsxDEV","Fragment","_Fragment","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","prototype","options","createCustomIcon","type","divIcon","className","html","MapEvents","onBoundsChange","_s","map","moveend","bounds","getBounds","boundsData","north","getNorth","south","getSouth","east","getEast","west","getWest","mapBoundsEl","document","getElementById","dataset","zoomend","_c","CenterMap","position","_s2","flyTo","lat","lng","animate","duration","_c2","MapView","userLocation","startLocation","destination","route","roadRatings","routeSegments","trafficData","onRoadRating","_s3","mapCenter","setMapCenter","mapZoom","setMapZoom","selectedRoad","setSelectedRoad","handleRoadClick","event","roadSegment","originalEvent","DomEvent","stopPropagation","console","log","handleRouteClick","clickLatLng","latlng","id","Date","now","coordinates","start","end","clickPoint","submitRoadRating","rating","setTimeout","error","children","style","display","fileName","_jsxFileName","lineNumber","columnNumber","center","zoom","height","width","attribution","url","positions","point","color","weight","opacity","smoothFactor","pathOptions","eventHandlers","click","mouseover","e","target","setStyle","mouseout","index","dashArray","roadId","length","segment","points","radius","fillColor","fillOpacity","onClose","closeButton","autoClose","closeOnClick","padding","textAlign","fontWeight","marginBottom","distanceKm","fontSize","justifyContent","gap","backgroundColor","border","borderRadius","cursor","onClick","marginTop","_c3","$RefreshReg$"],"sources":["/home/jai/Desktop/SAFE_ROUTE_2/safe-route/client/src/components/MapView.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n  MapContainer, \n  TileLayer, \n  Marker, \n  Popup, \n  useMap, \n  Polyline,\n  useMapEvents,\n  CircleMarker\n} from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for Leaflet marker icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Custom marker icons\nconst createCustomIcon = (type) => {\n  return L.divIcon({\n    className: `custom-marker-icon ${type}`,\n    html: type === 'user' ? \n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>' :\n      type === 'start' ?\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>' :\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/></svg>',\n    iconSize: [30, 30],\n    iconAnchor: [15, 30]\n  });\n};\n\n// Component to handle map events\nconst MapEvents = ({ onBoundsChange }) => {\n  const map = useMapEvents({\n    moveend: () => {\n      const bounds = map.getBounds();\n      const boundsData = {\n        north: bounds.getNorth(),\n        south: bounds.getSouth(),\n        east: bounds.getEast(),\n        west: bounds.getWest()\n      };\n      \n      // Store bounds in a hidden element for access from outside the component\n      const mapBoundsEl = document.getElementById('mapBounds');\n      if (mapBoundsEl) {\n        mapBoundsEl.dataset.north = boundsData.north;\n        mapBoundsEl.dataset.south = boundsData.south;\n        mapBoundsEl.dataset.east = boundsData.east;\n        mapBoundsEl.dataset.west = boundsData.west;\n      }\n      \n      onBoundsChange(boundsData);\n    },\n    zoomend: () => {\n      const bounds = map.getBounds();\n      const boundsData = {\n        north: bounds.getNorth(),\n        south: bounds.getSouth(),\n        east: bounds.getEast(),\n        west: bounds.getWest()\n      };\n      \n      // Store bounds in a hidden element for access from outside the component\n      const mapBoundsEl = document.getElementById('mapBounds');\n      if (mapBoundsEl) {\n        mapBoundsEl.dataset.north = boundsData.north;\n        mapBoundsEl.dataset.south = boundsData.south;\n        mapBoundsEl.dataset.east = boundsData.east;\n        mapBoundsEl.dataset.west = boundsData.west;\n      }\n      \n      onBoundsChange(boundsData);\n    }\n  });\n  \n  return null;\n};\n\n// Component to center map on user location\nconst CenterMap = ({ position }) => {\n  const map = useMap();\n  \n  useEffect(() => {\n    if (position) {\n      map.flyTo([position.lat, position.lng], 13, {\n        animate: true,\n        duration: 1.5\n      });\n    }\n  }, [map, position]);\n  \n  return null;\n};\n\nconst MapView = ({ \n  userLocation, \n  startLocation,\n  destination, \n  route, \n  roadRatings, \n  routeSegments,\n  trafficData, \n  onBoundsChange, \n  onRoadRating \n}) => {\n  const [mapCenter, setMapCenter] = useState([20.5937, 78.9629]); // Default center of India\n  const [mapZoom, setMapZoom] = useState(5);\n  const [selectedRoad, setSelectedRoad] = useState(null);\n\n  // Update map center when user location is available\n  useEffect(() => {\n    if (userLocation) {\n      setMapCenter([userLocation.lat, userLocation.lng]);\n      setMapZoom(13);\n    }\n  }, [userLocation]);\n  \n  // Update map center when start location is selected\n  useEffect(() => {\n    if (startLocation) {\n      setMapCenter([startLocation.lat, startLocation.lng]);\n      setMapZoom(13);\n    }\n  }, [startLocation]);\n\n  // Handle road click for rating\n  const handleRoadClick = (event, roadSegment) => {\n    // Prevent map click event\n    if (event && event.originalEvent) {\n      L.DomEvent.stopPropagation(event.originalEvent);\n    }\n    \n    setSelectedRoad(roadSegment);\n    \n    // Log for debugging\n    console.log('Road segment selected for rating:', roadSegment);\n  };\n\n  // Handle click on the main route - optimized version\n  const handleRouteClick = (event) => {\n    // Prevent default behaviors and propagation\n    if (event && event.originalEvent) {\n      L.DomEvent.stopPropagation(event.originalEvent);\n    }\n    \n    // Get the click location\n    const clickLatLng = event.latlng;\n    \n    // Create a simplified road segment from the click location\n    // We'll use a minimal object with just what we need\n    const roadSegment = {\n      id: `route_click_${Date.now()}`,\n      coordinates: {\n        start: {\n          lat: clickLatLng.lat - 0.0005,\n          lng: clickLatLng.lng - 0.0005\n        },\n        end: {\n          lat: clickLatLng.lat + 0.0005,\n          lng: clickLatLng.lng + 0.0005\n        }\n      },\n      clickPoint: clickLatLng\n    };\n    \n    // Set the selected road immediately\n    setSelectedRoad(roadSegment);\n  };\n\n  // Submit road rating - fixed version to prevent stuck popups\n  const submitRoadRating = (rating) => {\n    if (selectedRoad) {\n      // First close the popup to prevent it from getting stuck\n      setSelectedRoad(null);\n      \n      // Then submit the rating (after popup is closed)\n      setTimeout(() => {\n        try {\n          onRoadRating(\n            selectedRoad.id,\n            selectedRoad.coordinates,\n            rating\n          );\n        } catch (error) {\n          console.error('Error submitting road rating:', error);\n        }\n      }, 10);\n    }\n  };\n\n  // No longer needed after removing traffic system\n\n  return (\n    <div className=\"map-container\">\n      {/* Hidden element to store map bounds */}\n      <div id=\"mapBounds\" style={{ display: 'none' }} data-north=\"90\" data-south=\"-90\" data-east=\"180\" data-west=\"-180\"></div>\n      \n      <MapContainer \n        center={mapCenter} \n        zoom={mapZoom} \n        style={{ height: '100%', width: '100%' }}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {/* Map events handler */}\n        <MapEvents onBoundsChange={onBoundsChange} />\n        \n        {/* Center map on user location */}\n        {userLocation && <CenterMap position={userLocation} />}\n        \n        {/* User location marker */}\n        {userLocation && !startLocation && (\n          <Marker \n            position={[userLocation.lat, userLocation.lng]} \n            icon={createCustomIcon('user')}\n          >\n            <Popup>\n              <div className=\"text-center\">\n                <strong>Your Location</strong>\n              </div>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Start location marker */}\n        {startLocation && (\n          <Marker \n            position={[startLocation.lat, startLocation.lng]} \n            icon={createCustomIcon('start')}\n          >\n            <Popup>\n              <div className=\"text-center\">\n                <strong>Start Location</strong>\n              </div>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Destination marker */}\n        {destination && (\n          <Marker \n            position={[destination.lat, destination.lng]} \n            icon={createCustomIcon('destination')}\n          >\n            <Popup>\n              <div className=\"text-center\">\n                <strong>Destination</strong>\n              </div>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Route polyline */}\n        {route && (\n          <>\n            {/* Route outline for better visibility */}\n            <Polyline \n              positions={route.map(point => [point.lat, point.lng])}\n              color=\"#ffffff\"\n              weight={9}\n              opacity={0.4}\n              smoothFactor={1}\n            />\n            {/* Main route line - clickable for rating */}\n            <Polyline \n              positions={route.map(point => [point.lat, point.lng])}\n              pathOptions={{\n                color: '#006400',\n                weight: 6,\n                opacity: 0.8,\n                smoothFactor: 1,\n                className: 'clickable-main-route'\n              }}\n              eventHandlers={{\n                click: handleRouteClick,\n                mouseover: (e) => {\n                  // Simplified style change\n                  e.target.setStyle({\n                    weight: 8,\n                    color: '#008000'\n                  });\n                },\n                mouseout: (e) => {\n                  // Simplified style change\n                  e.target.setStyle({\n                    weight: 6,\n                    color: '#006400'\n                  });\n                }\n              }}\n            />\n          </>\n        )}\n        \n        {/* Road ratings visualization */}\n        {roadRatings && roadRatings.map((rating, index) => (\n          <Polyline \n            key={`rating-${rating.roadId}-${index}`}\n            positions={[\n              [rating.coordinates.start.lat, rating.coordinates.start.lng],\n              [rating.coordinates.end.lat, rating.coordinates.end.lng]\n            ]}\n            color={rating.rating === 'Good' ? '#28a745' : '#dc3545'}\n            weight={4}\n            opacity={0.6}\n            dashArray={rating.rating === 'Good' ? '' : '5, 10'}\n          />\n        ))}\n        \n        {/* 2 km segments for rating that follow the actual road */}\n        {routeSegments && routeSegments.length > 0 && routeSegments.map((segment, index) => (\n          <React.Fragment key={`segment-container-${segment.id}-${index}`}>\n            {/* The segment line */}\n            <Polyline \n              key={`segment-${segment.id}-${index}`}\n              positions={segment.points || [\n                [segment.coordinates.start.lat, segment.coordinates.start.lng],\n                [segment.coordinates.end.lat, segment.coordinates.end.lng]\n              ]}\n              pathOptions={{\n                color: '#006400',\n                weight: 8,\n                opacity: 0.7,\n                className: 'clickable-route-segment'\n              }}\n              eventHandlers={{\n                click: (e) => {\n                  console.log('2km road segment clicked:', segment);\n                  handleRoadClick(e, segment);\n                },\n                mouseover: (e) => {\n                  e.target.setStyle({\n                    weight: 10,\n                    color: '#008000'\n                  });\n                },\n                mouseout: (e) => {\n                  e.target.setStyle({\n                    weight: 8,\n                    color: '#006400'\n                  });\n                }\n              }}\n            />\n            \n            {/* Segment divider markers */}\n            {index > 0 && (\n              <CircleMarker\n                center={[\n                  segment.coordinates.start.lat,\n                  segment.coordinates.start.lng\n                ]}\n                radius={4}\n                pathOptions={{\n                  color: '#ffffff',\n                  fillColor: '#006400',\n                  fillOpacity: 1,\n                  weight: 2\n                }}\n              />\n            )}\n          </React.Fragment>\n        ))}\n        \n        {/* Traffic data removed */}\n        \n        {/* Road click for rating - with improved popup handling */}\n        {selectedRoad && (\n          <Popup\n            position={[\n              selectedRoad.clickPoint ? selectedRoad.clickPoint.lat : (selectedRoad.coordinates.start.lat + selectedRoad.coordinates.end.lat) / 2,\n              selectedRoad.clickPoint ? selectedRoad.clickPoint.lng : (selectedRoad.coordinates.start.lng + selectedRoad.coordinates.end.lng) / 2\n            ]}\n            onClose={() => setSelectedRoad(null)}\n            closeButton={true}\n            autoClose={true}\n            closeOnClick={false}\n          >\n            <div className=\"road-rating-popup\" style={{ padding: '10px', textAlign: 'center' }}>\n              <p style={{ fontWeight: 'bold', marginBottom: '5px' }}>Rate this road segment:</p>\n              {selectedRoad.distanceKm && (\n                <p style={{ fontSize: '12px', marginBottom: '10px', color: '#555' }}>\n                  ~{selectedRoad.distanceKm} km segment\n                </p>\n              )}\n              <div style={{ display: 'flex', justifyContent: 'space-between', gap: '10px' }}>\n                <button \n                  style={{ \n                    backgroundColor: '#28a745', \n                    color: 'white', \n                    border: 'none', \n                    padding: '8px 16px', \n                    borderRadius: '4px', \n                    cursor: 'pointer' \n                  }}\n                  onClick={() => submitRoadRating('Good')}\n                >\n                  Good Road\n                </button>\n                <button \n                  style={{ \n                    backgroundColor: '#dc3545', \n                    color: 'white', \n                    border: 'none', \n                    padding: '8px 16px', \n                    borderRadius: '4px', \n                    cursor: 'pointer' \n                  }}\n                  onClick={() => submitRoadRating('Bad')}\n                >\n                  Bad Road\n                </button>\n              </div>\n              <div style={{ marginTop: '10px' }}>\n                <button \n                  style={{ \n                    backgroundColor: '#6c757d', \n                    color: 'white', \n                    border: 'none', \n                    padding: '5px 10px', \n                    borderRadius: '4px', \n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                  onClick={() => setSelectedRoad(null)}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </Popup>\n        )}\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default MapView;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SACEC,YAAY,EACZC,SAAS,EACTC,MAAM,EACNC,KAAK,EACLC,MAAM,EACNC,QAAQ,EACRC,YAAY,EACZC,YAAY,QACP,eAAe;AACtB,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;;AAEjC;AACA,OAAOC,IAAI,MAAM,qCAAqC;AACtD,OAAOC,UAAU,MAAM,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/D,IAAIC,WAAW,GAAGP,CAAC,CAACC,IAAI,CAAC;EACvBO,OAAO,EAAEP,IAAI;EACbQ,SAAS,EAAEP,UAAU;EACrBQ,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;EAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;AACrB,CAAC,CAAC;AAEFX,CAAC,CAACN,MAAM,CAACkB,SAAS,CAACC,OAAO,CAACZ,IAAI,GAAGM,WAAW;;AAE7C;AACA,MAAMO,gBAAgB,GAAIC,IAAI,IAAK;EACjC,OAAOf,CAAC,CAACgB,OAAO,CAAC;IACfC,SAAS,EAAE,sBAAsBF,IAAI,EAAE;IACvCG,IAAI,EAAEH,IAAI,KAAK,MAAM,GACnB,kRAAkR,GAClRA,IAAI,KAAK,OAAO,GAChB,kRAAkR,GAClR,kRAAkR;IACpRL,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,MAAMQ,SAAS,GAAGA,CAAC;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAMC,GAAG,GAAGxB,YAAY,CAAC;IACvByB,OAAO,EAAEA,CAAA,KAAM;MACb,MAAMC,MAAM,GAAGF,GAAG,CAACG,SAAS,CAAC,CAAC;MAC9B,MAAMC,UAAU,GAAG;QACjBC,KAAK,EAAEH,MAAM,CAACI,QAAQ,CAAC,CAAC;QACxBC,KAAK,EAAEL,MAAM,CAACM,QAAQ,CAAC,CAAC;QACxBC,IAAI,EAAEP,MAAM,CAACQ,OAAO,CAAC,CAAC;QACtBC,IAAI,EAAET,MAAM,CAACU,OAAO,CAAC;MACvB,CAAC;;MAED;MACA,MAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAIF,WAAW,EAAE;QACfA,WAAW,CAACG,OAAO,CAACX,KAAK,GAAGD,UAAU,CAACC,KAAK;QAC5CQ,WAAW,CAACG,OAAO,CAACT,KAAK,GAAGH,UAAU,CAACG,KAAK;QAC5CM,WAAW,CAACG,OAAO,CAACP,IAAI,GAAGL,UAAU,CAACK,IAAI;QAC1CI,WAAW,CAACG,OAAO,CAACL,IAAI,GAAGP,UAAU,CAACO,IAAI;MAC5C;MAEAb,cAAc,CAACM,UAAU,CAAC;IAC5B,CAAC;IACDa,OAAO,EAAEA,CAAA,KAAM;MACb,MAAMf,MAAM,GAAGF,GAAG,CAACG,SAAS,CAAC,CAAC;MAC9B,MAAMC,UAAU,GAAG;QACjBC,KAAK,EAAEH,MAAM,CAACI,QAAQ,CAAC,CAAC;QACxBC,KAAK,EAAEL,MAAM,CAACM,QAAQ,CAAC,CAAC;QACxBC,IAAI,EAAEP,MAAM,CAACQ,OAAO,CAAC,CAAC;QACtBC,IAAI,EAAET,MAAM,CAACU,OAAO,CAAC;MACvB,CAAC;;MAED;MACA,MAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAIF,WAAW,EAAE;QACfA,WAAW,CAACG,OAAO,CAACX,KAAK,GAAGD,UAAU,CAACC,KAAK;QAC5CQ,WAAW,CAACG,OAAO,CAACT,KAAK,GAAGH,UAAU,CAACG,KAAK;QAC5CM,WAAW,CAACG,OAAO,CAACP,IAAI,GAAGL,UAAU,CAACK,IAAI;QAC1CI,WAAW,CAACG,OAAO,CAACL,IAAI,GAAGP,UAAU,CAACO,IAAI;MAC5C;MAEAb,cAAc,CAACM,UAAU,CAAC;IAC5B;EACF,CAAC,CAAC;EAEF,OAAO,IAAI;AACb,CAAC;;AAED;AAAAL,EAAA,CA/CMF,SAAS;EAAA,QACDrB,YAAY;AAAA;AAAA0C,EAAA,GADpBrB,SAAS;AAgDf,MAAMsB,SAAS,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAClC,MAAMrB,GAAG,GAAG1B,MAAM,CAAC,CAAC;EAEpBN,SAAS,CAAC,MAAM;IACd,IAAIoD,QAAQ,EAAE;MACZpB,GAAG,CAACsB,KAAK,CAAC,CAACF,QAAQ,CAACG,GAAG,EAAEH,QAAQ,CAACI,GAAG,CAAC,EAAE,EAAE,EAAE;QAC1CC,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAAC1B,GAAG,EAAEoB,QAAQ,CAAC,CAAC;EAEnB,OAAO,IAAI;AACb,CAAC;AAACC,GAAA,CAbIF,SAAS;EAAA,QACD7C,MAAM;AAAA;AAAAqD,GAAA,GADdR,SAAS;AAef,MAAMS,OAAO,GAAGA,CAAC;EACfC,YAAY;EACZC,aAAa;EACbC,WAAW;EACXC,KAAK;EACLC,WAAW;EACXC,aAAa;EACbC,WAAW;EACXrC,cAAc;EACdsC;AACF,CAAC,KAAK;EAAAC,GAAA;EACJ,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGtE,QAAQ,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;EAChE,MAAM,CAACuE,OAAO,EAAEC,UAAU,CAAC,GAAGxE,QAAQ,CAAC,CAAC,CAAC;EACzC,MAAM,CAACyE,YAAY,EAAEC,eAAe,CAAC,GAAG1E,QAAQ,CAAC,IAAI,CAAC;;EAEtD;EACAD,SAAS,CAAC,MAAM;IACd,IAAI6D,YAAY,EAAE;MAChBU,YAAY,CAAC,CAACV,YAAY,CAACN,GAAG,EAAEM,YAAY,CAACL,GAAG,CAAC,CAAC;MAClDiB,UAAU,CAAC,EAAE,CAAC;IAChB;EACF,CAAC,EAAE,CAACZ,YAAY,CAAC,CAAC;;EAElB;EACA7D,SAAS,CAAC,MAAM;IACd,IAAI8D,aAAa,EAAE;MACjBS,YAAY,CAAC,CAACT,aAAa,CAACP,GAAG,EAAEO,aAAa,CAACN,GAAG,CAAC,CAAC;MACpDiB,UAAU,CAAC,EAAE,CAAC;IAChB;EACF,CAAC,EAAE,CAACX,aAAa,CAAC,CAAC;;EAEnB;EACA,MAAMc,eAAe,GAAGA,CAACC,KAAK,EAAEC,WAAW,KAAK;IAC9C;IACA,IAAID,KAAK,IAAIA,KAAK,CAACE,aAAa,EAAE;MAChCrE,CAAC,CAACsE,QAAQ,CAACC,eAAe,CAACJ,KAAK,CAACE,aAAa,CAAC;IACjD;IAEAJ,eAAe,CAACG,WAAW,CAAC;;IAE5B;IACAI,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEL,WAAW,CAAC;EAC/D,CAAC;;EAED;EACA,MAAMM,gBAAgB,GAAIP,KAAK,IAAK;IAClC;IACA,IAAIA,KAAK,IAAIA,KAAK,CAACE,aAAa,EAAE;MAChCrE,CAAC,CAACsE,QAAQ,CAACC,eAAe,CAACJ,KAAK,CAACE,aAAa,CAAC;IACjD;;IAEA;IACA,MAAMM,WAAW,GAAGR,KAAK,CAACS,MAAM;;IAEhC;IACA;IACA,MAAMR,WAAW,GAAG;MAClBS,EAAE,EAAE,eAAeC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC/BC,WAAW,EAAE;QACXC,KAAK,EAAE;UACLpC,GAAG,EAAE8B,WAAW,CAAC9B,GAAG,GAAG,MAAM;UAC7BC,GAAG,EAAE6B,WAAW,CAAC7B,GAAG,GAAG;QACzB,CAAC;QACDoC,GAAG,EAAE;UACHrC,GAAG,EAAE8B,WAAW,CAAC9B,GAAG,GAAG,MAAM;UAC7BC,GAAG,EAAE6B,WAAW,CAAC7B,GAAG,GAAG;QACzB;MACF,CAAC;MACDqC,UAAU,EAAER;IACd,CAAC;;IAED;IACAV,eAAe,CAACG,WAAW,CAAC;EAC9B,CAAC;;EAED;EACA,MAAMgB,gBAAgB,GAAIC,MAAM,IAAK;IACnC,IAAIrB,YAAY,EAAE;MAChB;MACAC,eAAe,CAAC,IAAI,CAAC;;MAErB;MACAqB,UAAU,CAAC,MAAM;QACf,IAAI;UACF5B,YAAY,CACVM,YAAY,CAACa,EAAE,EACfb,YAAY,CAACgB,WAAW,EACxBK,MACF,CAAC;QACH,CAAC,CAAC,OAAOE,KAAK,EAAE;UACdf,OAAO,CAACe,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACvD;MACF,CAAC,EAAE,EAAE,CAAC;IACR;EACF,CAAC;;EAED;;EAEA,oBACEnF,OAAA;IAAKa,SAAS,EAAC,eAAe;IAAAuE,QAAA,gBAE5BpF,OAAA;MAAKyE,EAAE,EAAC,WAAW;MAACY,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAO,CAAE;MAAC,cAAW,IAAI;MAAC,cAAW,KAAK;MAAC,aAAU,KAAK;MAAC,aAAU;IAAM;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAExH1F,OAAA,CAACZ,YAAY;MACXuG,MAAM,EAAEnC,SAAU;MAClBoC,IAAI,EAAElC,OAAQ;MACd2B,KAAK,EAAE;QAAEQ,MAAM,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAV,QAAA,gBAEzCpF,OAAA,CAACX,SAAS;QACR0G,WAAW,EAAC,yFAAyF;QACrGC,GAAG,EAAC;MAAoD;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eAGF1F,OAAA,CAACe,SAAS;QAACC,cAAc,EAAEA;MAAe;QAAAuE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAG5C3C,YAAY,iBAAI/C,OAAA,CAACqC,SAAS;QAACC,QAAQ,EAAES;MAAa;QAAAwC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAGrD3C,YAAY,IAAI,CAACC,aAAa,iBAC7BhD,OAAA,CAACV,MAAM;QACLgD,QAAQ,EAAE,CAACS,YAAY,CAACN,GAAG,EAAEM,YAAY,CAACL,GAAG,CAAE;QAC/C7C,IAAI,EAAEa,gBAAgB,CAAC,MAAM,CAAE;QAAA0E,QAAA,eAE/BpF,OAAA,CAACT,KAAK;UAAA6F,QAAA,eACJpF,OAAA;YAAKa,SAAS,EAAC,aAAa;YAAAuE,QAAA,eAC1BpF,OAAA;cAAAoF,QAAA,EAAQ;YAAa;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACT,EAGA1C,aAAa,iBACZhD,OAAA,CAACV,MAAM;QACLgD,QAAQ,EAAE,CAACU,aAAa,CAACP,GAAG,EAAEO,aAAa,CAACN,GAAG,CAAE;QACjD7C,IAAI,EAAEa,gBAAgB,CAAC,OAAO,CAAE;QAAA0E,QAAA,eAEhCpF,OAAA,CAACT,KAAK;UAAA6F,QAAA,eACJpF,OAAA;YAAKa,SAAS,EAAC,aAAa;YAAAuE,QAAA,eAC1BpF,OAAA;cAAAoF,QAAA,EAAQ;YAAc;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACT,EAGAzC,WAAW,iBACVjD,OAAA,CAACV,MAAM;QACLgD,QAAQ,EAAE,CAACW,WAAW,CAACR,GAAG,EAAEQ,WAAW,CAACP,GAAG,CAAE;QAC7C7C,IAAI,EAAEa,gBAAgB,CAAC,aAAa,CAAE;QAAA0E,QAAA,eAEtCpF,OAAA,CAACT,KAAK;UAAA6F,QAAA,eACJpF,OAAA;YAAKa,SAAS,EAAC,aAAa;YAAAuE,QAAA,eAC1BpF,OAAA;cAAAoF,QAAA,EAAQ;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACT,EAGAxC,KAAK,iBACJlD,OAAA,CAAAE,SAAA;QAAAkF,QAAA,gBAEEpF,OAAA,CAACP,QAAQ;UACPwG,SAAS,EAAE/C,KAAK,CAAChC,GAAG,CAACgF,KAAK,IAAI,CAACA,KAAK,CAACzD,GAAG,EAAEyD,KAAK,CAACxD,GAAG,CAAC,CAAE;UACtDyD,KAAK,EAAC,SAAS;UACfC,MAAM,EAAE,CAAE;UACVC,OAAO,EAAE,GAAI;UACbC,YAAY,EAAE;QAAE;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eAEF1F,OAAA,CAACP,QAAQ;UACPwG,SAAS,EAAE/C,KAAK,CAAChC,GAAG,CAACgF,KAAK,IAAI,CAACA,KAAK,CAACzD,GAAG,EAAEyD,KAAK,CAACxD,GAAG,CAAC,CAAE;UACtD6D,WAAW,EAAE;YACXJ,KAAK,EAAE,SAAS;YAChBC,MAAM,EAAE,CAAC;YACTC,OAAO,EAAE,GAAG;YACZC,YAAY,EAAE,CAAC;YACfzF,SAAS,EAAE;UACb,CAAE;UACF2F,aAAa,EAAE;YACbC,KAAK,EAAEnC,gBAAgB;YACvBoC,SAAS,EAAGC,CAAC,IAAK;cAChB;cACAA,CAAC,CAACC,MAAM,CAACC,QAAQ,CAAC;gBAChBT,MAAM,EAAE,CAAC;gBACTD,KAAK,EAAE;cACT,CAAC,CAAC;YACJ,CAAC;YACDW,QAAQ,EAAGH,CAAC,IAAK;cACf;cACAA,CAAC,CAACC,MAAM,CAACC,QAAQ,CAAC;gBAChBT,MAAM,EAAE,CAAC;gBACTD,KAAK,EAAE;cACT,CAAC,CAAC;YACJ;UACF;QAAE;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA,eACF,CACH,EAGAvC,WAAW,IAAIA,WAAW,CAACjC,GAAG,CAAC,CAAC+D,MAAM,EAAE8B,KAAK,kBAC5C/G,OAAA,CAACP,QAAQ;QAEPwG,SAAS,EAAE,CACT,CAAChB,MAAM,CAACL,WAAW,CAACC,KAAK,CAACpC,GAAG,EAAEwC,MAAM,CAACL,WAAW,CAACC,KAAK,CAACnC,GAAG,CAAC,EAC5D,CAACuC,MAAM,CAACL,WAAW,CAACE,GAAG,CAACrC,GAAG,EAAEwC,MAAM,CAACL,WAAW,CAACE,GAAG,CAACpC,GAAG,CAAC,CACxD;QACFyD,KAAK,EAAElB,MAAM,CAACA,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,SAAU;QACxDmB,MAAM,EAAE,CAAE;QACVC,OAAO,EAAE,GAAI;QACbW,SAAS,EAAE/B,MAAM,CAACA,MAAM,KAAK,MAAM,GAAG,EAAE,GAAG;MAAQ,GAR9C,UAAUA,MAAM,CAACgC,MAAM,IAAIF,KAAK,EAAE;QAAAxB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASxC,CACF,CAAC,EAGDtC,aAAa,IAAIA,aAAa,CAAC8D,MAAM,GAAG,CAAC,IAAI9D,aAAa,CAAClC,GAAG,CAAC,CAACiG,OAAO,EAAEJ,KAAK,kBAC7E/G,OAAA,CAACf,KAAK,CAACgB,QAAQ;QAAAmF,QAAA,gBAEbpF,OAAA,CAACP,QAAQ;UAEPwG,SAAS,EAAEkB,OAAO,CAACC,MAAM,IAAI,CAC3B,CAACD,OAAO,CAACvC,WAAW,CAACC,KAAK,CAACpC,GAAG,EAAE0E,OAAO,CAACvC,WAAW,CAACC,KAAK,CAACnC,GAAG,CAAC,EAC9D,CAACyE,OAAO,CAACvC,WAAW,CAACE,GAAG,CAACrC,GAAG,EAAE0E,OAAO,CAACvC,WAAW,CAACE,GAAG,CAACpC,GAAG,CAAC,CAC1D;UACF6D,WAAW,EAAE;YACXJ,KAAK,EAAE,SAAS;YAChBC,MAAM,EAAE,CAAC;YACTC,OAAO,EAAE,GAAG;YACZxF,SAAS,EAAE;UACb,CAAE;UACF2F,aAAa,EAAE;YACbC,KAAK,EAAGE,CAAC,IAAK;cACZvC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE8C,OAAO,CAAC;cACjDrD,eAAe,CAAC6C,CAAC,EAAEQ,OAAO,CAAC;YAC7B,CAAC;YACDT,SAAS,EAAGC,CAAC,IAAK;cAChBA,CAAC,CAACC,MAAM,CAACC,QAAQ,CAAC;gBAChBT,MAAM,EAAE,EAAE;gBACVD,KAAK,EAAE;cACT,CAAC,CAAC;YACJ,CAAC;YACDW,QAAQ,EAAGH,CAAC,IAAK;cACfA,CAAC,CAACC,MAAM,CAACC,QAAQ,CAAC;gBAChBT,MAAM,EAAE,CAAC;gBACTD,KAAK,EAAE;cACT,CAAC,CAAC;YACJ;UACF;QAAE,GA5BG,WAAWgB,OAAO,CAAC1C,EAAE,IAAIsC,KAAK,EAAE;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA6BtC,CAAC,EAGDqB,KAAK,GAAG,CAAC,iBACR/G,OAAA,CAACL,YAAY;UACXgG,MAAM,EAAE,CACNwB,OAAO,CAACvC,WAAW,CAACC,KAAK,CAACpC,GAAG,EAC7B0E,OAAO,CAACvC,WAAW,CAACC,KAAK,CAACnC,GAAG,CAC7B;UACF2E,MAAM,EAAE,CAAE;UACVd,WAAW,EAAE;YACXJ,KAAK,EAAE,SAAS;YAChBmB,SAAS,EAAE,SAAS;YACpBC,WAAW,EAAE,CAAC;YACdnB,MAAM,EAAE;UACV;QAAE;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACF;MAAA,GAjDkB,qBAAqByB,OAAO,CAAC1C,EAAE,IAAIsC,KAAK,EAAE;QAAAxB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAkD/C,CACjB,CAAC,EAKD9B,YAAY,iBACX5D,OAAA,CAACT,KAAK;QACJ+C,QAAQ,EAAE,CACRsB,YAAY,CAACmB,UAAU,GAAGnB,YAAY,CAACmB,UAAU,CAACtC,GAAG,GAAG,CAACmB,YAAY,CAACgB,WAAW,CAACC,KAAK,CAACpC,GAAG,GAAGmB,YAAY,CAACgB,WAAW,CAACE,GAAG,CAACrC,GAAG,IAAI,CAAC,EACnImB,YAAY,CAACmB,UAAU,GAAGnB,YAAY,CAACmB,UAAU,CAACrC,GAAG,GAAG,CAACkB,YAAY,CAACgB,WAAW,CAACC,KAAK,CAACnC,GAAG,GAAGkB,YAAY,CAACgB,WAAW,CAACE,GAAG,CAACpC,GAAG,IAAI,CAAC,CACnI;QACF8E,OAAO,EAAEA,CAAA,KAAM3D,eAAe,CAAC,IAAI,CAAE;QACrC4D,WAAW,EAAE,IAAK;QAClBC,SAAS,EAAE,IAAK;QAChBC,YAAY,EAAE,KAAM;QAAAvC,QAAA,eAEpBpF,OAAA;UAAKa,SAAS,EAAC,mBAAmB;UAACwE,KAAK,EAAE;YAAEuC,OAAO,EAAE,MAAM;YAAEC,SAAS,EAAE;UAAS,CAAE;UAAAzC,QAAA,gBACjFpF,OAAA;YAAGqF,KAAK,EAAE;cAAEyC,UAAU,EAAE,MAAM;cAAEC,YAAY,EAAE;YAAM,CAAE;YAAA3C,QAAA,EAAC;UAAuB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,EACjF9B,YAAY,CAACoE,UAAU,iBACtBhI,OAAA;YAAGqF,KAAK,EAAE;cAAE4C,QAAQ,EAAE,MAAM;cAAEF,YAAY,EAAE,MAAM;cAAE5B,KAAK,EAAE;YAAO,CAAE;YAAAf,QAAA,GAAC,GAClE,EAACxB,YAAY,CAACoE,UAAU,EAAC,aAC5B;UAAA;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CACJ,eACD1F,OAAA;YAAKqF,KAAK,EAAE;cAAEC,OAAO,EAAE,MAAM;cAAE4C,cAAc,EAAE,eAAe;cAAEC,GAAG,EAAE;YAAO,CAAE;YAAA/C,QAAA,gBAC5EpF,OAAA;cACEqF,KAAK,EAAE;gBACL+C,eAAe,EAAE,SAAS;gBAC1BjC,KAAK,EAAE,OAAO;gBACdkC,MAAM,EAAE,MAAM;gBACdT,OAAO,EAAE,UAAU;gBACnBU,YAAY,EAAE,KAAK;gBACnBC,MAAM,EAAE;cACV,CAAE;cACFC,OAAO,EAAEA,CAAA,KAAMxD,gBAAgB,CAAC,MAAM,CAAE;cAAAI,QAAA,EACzC;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT1F,OAAA;cACEqF,KAAK,EAAE;gBACL+C,eAAe,EAAE,SAAS;gBAC1BjC,KAAK,EAAE,OAAO;gBACdkC,MAAM,EAAE,MAAM;gBACdT,OAAO,EAAE,UAAU;gBACnBU,YAAY,EAAE,KAAK;gBACnBC,MAAM,EAAE;cACV,CAAE;cACFC,OAAO,EAAEA,CAAA,KAAMxD,gBAAgB,CAAC,KAAK,CAAE;cAAAI,QAAA,EACxC;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACN1F,OAAA;YAAKqF,KAAK,EAAE;cAAEoD,SAAS,EAAE;YAAO,CAAE;YAAArD,QAAA,eAChCpF,OAAA;cACEqF,KAAK,EAAE;gBACL+C,eAAe,EAAE,SAAS;gBAC1BjC,KAAK,EAAE,OAAO;gBACdkC,MAAM,EAAE,MAAM;gBACdT,OAAO,EAAE,UAAU;gBACnBU,YAAY,EAAE,KAAK;gBACnBC,MAAM,EAAE,SAAS;gBACjBN,QAAQ,EAAE;cACZ,CAAE;cACFO,OAAO,EAAEA,CAAA,KAAM3E,eAAe,CAAC,IAAI,CAAE;cAAAuB,QAAA,EACtC;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACZ,CAAC;AAEV,CAAC;AAACnC,GAAA,CAxVIT,OAAO;AAAA4F,GAAA,GAAP5F,OAAO;AA0Vb,eAAeA,OAAO;AAAC,IAAAV,EAAA,EAAAS,GAAA,EAAA6F,GAAA;AAAAC,YAAA,CAAAvG,EAAA;AAAAuG,YAAA,CAAA9F,GAAA;AAAA8F,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}